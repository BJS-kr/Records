# 본격적인 시작

드디어 심화강의 주차가 종료됐다. 이제 혼자 강의 듣고 과제하는 과정은 완전히 끝났다는 얘기다. 심화주차 과제가 끝나자마자 미니프로젝트를 시작했다. 미니프로젝트가 끝나더라도 남은 것은 협업 프로젝트들 뿐이다. 심화과제를 진행하면서 express에 대한 기본적인 감을 확실히 잡게 된 것 같다. 게시판 CRUD 회원가입, 로그인을 구현했으며 개인적인 욕심때문에 추가목표 몇개를 설정해 적용했다.

# 심화 과제 : 나만의 목표들

https://github.com/BJS-kr/myblog

심화과제 자체는 자잘한 목표들을 제외하면 간단했다. 회원가입 조건 적용, 로그인, 게시판 CRUD가 전부였다. 뭔가 추가로 뻘짓을 해보는건 내 주특기 이므로, 나만의 새로운 목표들을 만들어서 실행했다.

첫 번째 목표는 성공했지만 다시는 하지 않을 뻘짓이었다. 바로 프론트 페이지에서 어떠한 스크립트도 쓰지 않고 기능을 완성하기였다. 어떻게 성공했냐면 express의 res객체에 write메소드는 다음 write를 이어서 실행한다는 점을 노린 것이다. alert이나 fetch등 프론트에서 함수화시켜서 사용해야될 기능들을 전부다 서버페이지에서 write로 처리했다. 그 댓가로 서버페이지는 엄청나게 지저분해졌다. fetch값을 잘 받을 수 있도록 get과 post를 이어붙여놓고 목적지는 get으로 fetch를 받았을때 작성한 스크립트로 location.href를 지정해 다시 보내는 구조를 공식화시켜서 구현했다. 뻘짓이지만 배운건 정말 많았다. 다만 앞으로 다시는 할 생각이 없다. 스크립트던 data전달에 관련된 기능들이건 전부 프론트에서 쓰는게 10000만배는 낫다는걸 깨달았다.

두 번째 목표는 '효용있는 암호화'를 구현하는 것이었다. 강의에서는 애초에 암호화를 하지도 않고 비밀번호와 비밀번호확인만 구현해서 DB에 저장하는 식이었다. 이대로 하기는 싫어서 좀 찾아봤더니 해쉬를 해서 구현 할 수 있긴하지만 해커들은 rainbow table을 활용해 그 정도는 쉽게 뚫어낸다는 것이었다. 다음 방법이 내가 사용한 pbkdf2 방식이었다.salt라는 무작위 문자열을 사용자가 입력한 비밀번호를 암호화할때마다 새로 생성해서 무작위의 횟수로 (권장횟수: 10만번 초과) 해쉬시켜 저장하는 것이다. 해커가 이 암호를 뚫을 수 없는 것은 아니지만, 엄청난 시간을 들여야 가능하도록 만드는 것이다. salt값도 매번 무작위로 생성되고, 몇번 해쉬시키는지도 알 수 없으니 가능한 일이다.
DB관리자도 비밀번호를 알 길이 없고, 대신 salt값을 같이 저장해 사용자가 로그인을 시도할때 입력한 비밀번호를 저장된 salt로 지정된 횟수만큼 해쉬해 결과 값이 똑같은지를 비교하는 것이다. 처음으로 실전적인 기술을 쓴 것 같아서 꽤 뿌듯했다.

세번째 목표는 단지 CRUD뿐 아니라 사용자 편의적인 기능을 몇개 구현해보자는 것이었다. 첫 번째는 공지는 게시판 상단에 정렬 되도록 하는 것(관리자만 작성가능하게)과, 두 번째는 게시글 내에서도 로그인 혹은 회원가입이 가능하도록 할 것, 세 번째는 자신이 작성한 글과 댓글에만 수정, 삭제 버튼이 생성되도록 할 것, 네 번째는 게시글내에서 어떤 동작을 수행하던, 다시 게시글로 돌아올 것(예를 들어, 로그인을 하건 회원가입을 해서 로그인을 하건 보고 있던 게시물로) 이었다.
모두 별 것 아닌 구현들이다. 그러나, 나는 취미로 개발을 하고자 하는 것이 아니라 비즈니스 밸류를 창출하고자 공부하는 사람이라는 걸 되새기면서 이것 저것 실사용 서비스에 가깝게 만들어보고자 노력했다.

네 번째는 데이터베이스를 똑똑하게 사용해보기 였다. 어렴풋이 구글링을하며 스쳐지나간 덕에 mongoose에 단지 데이터타입을 정의하는 기능만 있는 건 아니라는걸 알고 있었다. 최대한 mongoose를 활용해보자라고 마음먹었다. 처음 추가적으로 구현한 것은 auto increment적용이었다. object id가 단지 문자열이 아니라 대소비교가 가능한 값을 포함한다는 것은 나중에 알게 되었다... 어쨌든 몽구스 플러그인을 통해 auto increment로 페이지넘버를 부여해 정렬하거나 값을 가져왔다. 두 번째는 sub doc기능이었다. 스키마 내에 스키마를 정의할 수도 있고, 혹은 import한 스키마를 넣을 수도있고, 혹은 nested path로 구현할 수도 있었다. 이런 것들을 만든 사람들의 똑똑함에 감탄을 금할 수 없었다. $inc를 통해 값 자체를 증감시킬 수 있는 것도 알게 되었다. 이건 활용하지는 않았다. 그러나 게시글이 받는 좋아요를 구현하는데 아주 좋을 것 같았다. mongoose sequence는 추후 진행하는 프로젝트에서 꼭 사용해보고 싶다. 이런 것들을 배움으로서 현재 진행하고 있는 미니프로젝트에서 바로 페이지네이션부터 구현할 수 있었다.

# 목표에 대한 가능성?

많이 배우고 있긴 하지만 99일만에 뭐가 될거다라고 확신은 솔직히 못하겠다. 내가 채용하는 입장이더라도 99일동안 학원하나 수료한 사람을 왜 뽑겠는가. 내가 뽑더라도 무언가를 끊임없이 배우고 프로젝트를 진행하고 결과물도 잘 뽑아낼 줄 아는 사람을 뽑을 것이다. 부트캠프가 끝난다고 뭐가 되는게 아니다. 부트캠프가 끝나더라도 바로 배운 것과 배울 것을 접목시켜 프로젝트를 진행할 수 있도록 계획하고 있다.

# 마지막 미니 프로젝트

솔직히 미니 프로젝트는 그냥 심화과제 복습수준이라 새로운 것들을 구현하고자 노력하고 있다. 심화과제에서 달라진 점은 채팅방시스템 구현과 빠른 속도의 페이지네이션(이것에 관해선 다음주에 쓸 수 있을 것 같다), 다중 사진 파일 업로드, cors 및 csrf보안, dotenv를 통한 환경변수 설정, morgan 차별 적용, 추상화, 구조화 등을 시도하고 있다. 순조로운 것 같아서 아직은 만족스럽다.

# 그래서, 아직 재밌으십니까? (4)

벌써 네번째 똑같은 질문을 물어본다니 감회가 새롭다. 개발을 하는 동안에는 끝없이 물어볼 수 있으면 좋겠다. 재미있다. 새로운걸 배우고 적용했는데 잘 될때, 개념만 보고 내가 스스로 알고리즘 풀듯이 구현해볼때 재밌다. 그런데 솔직히 요즘 몇일은 붕뜨는 것 같다. 크게 재미있다기보다는 축축 처지는 것 같다. 프론트와 소통도 잘 안되는 것 같고 백도 손발이 잘 맞는 것 같진 않다. 실무에서 어떻게 하는지 배우고 싶은 마음이 간절하다. 어떤 디자인 패턴, 아키텍처를 쓰는지, 라우트는 어떻게 구현하는지, socket.io를 잘쓴 코드도 보고싶다!!

일단 잘 쓴 코드를 보고 모방해보고 싶은 마음이 정말 크다 ㅠㅠ 내 스스로 주먹구구식으로 구현하는 것도 좋지만 이제는 정말 실무에서는 어떻게 구성하는지를 보고싶다.
